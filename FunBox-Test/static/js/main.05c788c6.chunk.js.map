{"version":3,"sources":["assets/images/delete-icon.png","api/api.js","redux/map-reducer.js","redux/redux-store.js","componets/MapItems/MapItems.jsx","componets/GoogleMapComponent/GoogleMapComponent.jsx","Map.js","serviceWorker.js","index.js"],"names":["module","exports","instance","axios","baseURL","GoogleAPI","str","get","then","response","data","initialState","items","correspondCoordinates","mapReducer","state","action","type","content","keyIndex","key","text","filteredItems","filter","item","filteredCoordinates","result","destination","source","draggableId","droppableId","index","newItemIds","i","length","splice","itemIds","newItems","newCoordinates","searchKey","itemIndex","findIndex","el","coordinatesIndex","actionKey","coordinates","lat","lng","markerNewCoordinates","markerKey","markerIndex","newArray","open","infoWindowKey","infoWindowIndex","newInfowWindowArray","reducers","combineReducers","map","composeEnhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunkMiddleware","MapItems","props","createTasks","bind","this","delete","provided","draggableProps","dragHandleProps","ref","innerRef","className","src","deleteIcon","alt","onClick","listItems","entries","dropppableProps","placeholder","Component","GoogleMapComponent","withProps","googleMapURL","loadingElement","style","height","containerElement","mapElement","withHandlers","refs","markerRef","id","onMarkerDrag","getPosition","changeCoordinates","onMarkerClick","onCloseInfoWindow","withScriptjs","withGoogleMap","pathCoordinates","console","log","defaultZoom","defaultCenter","marker","position","draggable","onDrag","onCloseClick","path","geodesic","options","strokeColor","strokeOpacity","strokeWeight","MapApp","onDragEnd","handleDragAndDrop","onSubmit","e","Date","now","addItem","_inputElement","value","split","join","getCoordinates","preventDefault","a","deleteItem","connect","dispatch","results","geometry","location","calculateCoordinates","Boolean","hostname","match","ReactDOM","render","Provider","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.05c788c6.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAtQAAALUBOdDOnwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAMlSURBVEiJlZaxjhxFEIa/6pndvd31XkKAiJCwz5bJHYAtI5lXwGdZ1llyxCuYJwAHRMQIVkbwABBYcmDJCU9wZwmRg4nY4+a4mZ2pn2B6Zmfn5k6ik+7q6a76/79qSm2fPXnycSB9ZnBbwuSOAHfHJZDwuCd3JOESkpALIdyjLUcCd5fgVenV0zSQPvu0LO7cys+weBEJuUNctza103qvdkY819yjBmav0/G9X8aTL9Ng4fatImch33bWd35p4E6gaN8tzvg5ndwLSGZSfaiLpGs3o7uGzbc4d22r+Vqq/uX/M/fXXWAAgnAOwRD6Ro6Lvg2waeYg1ZXQR3BixlsLl7MA/giBf+iNTtCgPoI4TjC+2bnCm5AMo5c4DAlf7yz4s9qUdPesJEK92dNR4t2q5FGe8Xw85ygdnUN/lIz4bucK+9mKd7ziuCyp+nmhl4MNw9q+Wa45yDOW4xlH6bg9d5iM+HYy40G24tq6wKLj06rCm7KN0tdV1EPfRXGzLHjsznI848ArJPh+NOXB6YqrRY7Fcwa4RAbMADAkSPvaD1XHh2XBgTvLyRy52M9WXIvOG/TWSfC/VUWVpDEHA063qqHda/qNAGGNUwkza4OYBGYUVQU0DLrZH6iGw5CynMy4f7LCJH6aLnjoYq84w8ywqLs1wdyBOmi4FH2sluXOnP1sxd46Z2+d8zA75sfpgt/T0ZZELaNNqyC0Agygf5PUyPezFVfXRevg+jrnUbbih9kuv6Wj1nkjUSsVF5QpEm9DwnI85/7pMR9E5+1lM65Xaw5Oj3k+3eWvkGyYdNhIkA41LElM5TzO/ua9ddFebKsl2jeKnM+riln00Sa+o0q61eA6bHbl3JBv+kxMoHWcYcb7Vbmdh5hko2kVjf5dqeKcAIsQCB19WzYN4p40XZYQu+lQaTbrAMzNYrLYTmg3sWbnEg0iSDHWBSwAghmzLpM++h67hqGEUkyvfx2NP/moyEEOZtF3g6EZhoeEPP6hhoEZRvyzaX4uh5DwajTBzF6mpfT0RTr+6kUyuetyQ5tniXt9eeBZguILo33GxL14VsDLUv7Ff8clN+QOU7faAAAAAElFTkSuQmCC\"","import * as axios from \"axios\";\r\n\r\nconst instance = axios.create({\r\n  baseURL: 'https://maps.googleapis.com/maps/api/geocode/'\r\n});\r\n\r\n\r\nexport const GoogleAPI = {\r\n  getCoordinates(str) {\r\n    return instance.get(`/json?address=${str}&key=AIzaSyDFIeLcSXFoj1sjauT3e9I3V2p0P_hHAgk`)\r\n      .then(response => {\r\n        return response.data;\r\n      });\r\n  }\r\n}\r\n\r\n\r\n","import {GoogleAPI} from \"../api/api\";\r\n\r\nconst ADD_ITEM = 'ADD_ITEM';\r\nconst DELETE_ITEM = 'DELETE_ITEM';\r\nconst HANDLE_DRAG_AND_DROP = 'HANDLE_DRAG_AND_DROP';\r\nconst CALCULATE_COORDINATES = 'CALCULATE_COORDINATES';\r\nconst CHANGE_COORDINATES = 'CHANGE_COORDINATES';\r\nconst ON_MARKER_CLICK = 'ON_MARKER_CLICK';\r\nconst ON_CLOSE_INFO_WINDOW = 'ON_CLOSE_INFO_WINDOW';\r\n\r\nlet initialState = {\r\n  items: [],\r\n  correspondCoordinates: []\r\n};\r\n\r\nconst mapReducer = (state = initialState, action) => {\r\n\r\n  switch (action.type) {\r\n    case ADD_ITEM:\r\n      let content = action.content;\r\n      let keyIndex = action.key;\r\n      return {\r\n        ...state,\r\n        items: [...state.items, {key: keyIndex, text: content}]\r\n      };\r\n    case DELETE_ITEM:\r\n      let key = action.key;\r\n      let filteredItems = state.items.filter(function (item) {\r\n        return (item.key !== key);\r\n      });\r\n      let filteredCoordinates = state.correspondCoordinates.filter(function (item) {\r\n        return (item.key !== key);\r\n      })\r\n      return {\r\n        ...state,\r\n        items: filteredItems,\r\n        correspondCoordinates: filteredCoordinates\r\n      };\r\n    case HANDLE_DRAG_AND_DROP:\r\n\r\n      const {destination, source, draggableId} = action.result;\r\n      if (!destination) {\r\n        return state;\r\n      }\r\n\r\n      if (\r\n        destination.droppableId === source.droppableId &&\r\n        destination.index === source.index\r\n      ) {\r\n        return state;\r\n      }\r\n\r\n      const newItemIds = [];\r\n\r\n      for (let i = 0; i < state.items.length; i += 1) {\r\n        newItemIds[i] = state.items[i].key;\r\n      }\r\n\r\n      newItemIds.splice(source.index, 1);\r\n      newItemIds.splice(destination.index, 0, draggableId);\r\n\r\n      const itemIds = newItemIds;\r\n      const newItems = [];\r\n      const newCoordinates = [];\r\n\r\n\r\n      for (let i = 0; i < itemIds.length; i += 1) {\r\n        let searchKey = itemIds[i];\r\n        let itemIndex = state.items.findIndex(el => el.key === searchKey);\r\n        let coordinatesIndex = state.correspondCoordinates.findIndex(el => el.key === searchKey);\r\n        newItems[i] = state.items[itemIndex];\r\n        newCoordinates[i] = state.correspondCoordinates[coordinatesIndex];\r\n      }\r\n      return {\r\n        ...state,\r\n        items: newItems,\r\n        correspondCoordinates: newCoordinates\r\n      };\r\n    case CALCULATE_COORDINATES:\r\n      let actionKey = action.key;\r\n      let coordinates = action.coordinates;\r\n      return {\r\n        ...state,\r\n        correspondCoordinates: [...state.correspondCoordinates, {\r\n          key: actionKey,\r\n          coordinates: coordinates\r\n        }]\r\n      };\r\n    case CHANGE_COORDINATES:\r\n      let searchKey = action.key;\r\n      let lat = action.lat;\r\n      let lng = action.lng;\r\n\r\n      let coordinatesIndex = state.items.findIndex(el => el.key === searchKey);\r\n      let markerNewCoordinates = [];\r\n\r\n      for (let i = 0; i < state.correspondCoordinates.length; i += 1) {\r\n        if (i === coordinatesIndex) {\r\n          state.correspondCoordinates[i] = {\r\n            key: searchKey,\r\n            coordinates: {\r\n              lat: lat,\r\n              lng: lng\r\n            }\r\n          }\r\n        }\r\n        markerNewCoordinates[i] = state.correspondCoordinates[i];\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        correspondCoordinates: markerNewCoordinates\r\n      };\r\n\r\n    case ON_MARKER_CLICK:\r\n      let markerKey = action.key;\r\n      let markerIndex = state.items.findIndex(el => el.key === markerKey);\r\n      let newArray = [];\r\n\r\n      for (let i = 0; i < state.correspondCoordinates.length; i += 1) {\r\n        if (i === markerIndex) {\r\n          state.correspondCoordinates[i] = {\r\n            key: markerKey,\r\n            coordinates: {\r\n              lat: state.correspondCoordinates[i].coordinates.lat,\r\n              lng: state.correspondCoordinates[i].coordinates.lng,\r\n            },\r\n            text: state.items[i].text,\r\n            open: true\r\n          }\r\n        }\r\n        newArray[i] = state.correspondCoordinates[i];\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        correspondCoordinates: newArray\r\n      };\r\n    case ON_CLOSE_INFO_WINDOW:\r\n      let infoWindowKey = action.key;\r\n      let infoWindowIndex = state.items.findIndex(el => el.key === infoWindowKey);\r\n      let newInfowWindowArray = [];\r\n\r\n      for (let i = 0; i < state.correspondCoordinates.length; i += 1) {\r\n        if (i === infoWindowIndex) {\r\n          state.correspondCoordinates[i] = {\r\n            key: infoWindowKey,\r\n            coordinates: {\r\n              lat: state.correspondCoordinates[i].coordinates.lat,\r\n              lng: state.correspondCoordinates[i].coordinates.lng,\r\n            },\r\n            text: null,\r\n            open: false\r\n          }\r\n        }\r\n        newInfowWindowArray[i] = state.correspondCoordinates[i];\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        correspondCoordinates: newInfowWindowArray\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport const addItem = (key, content) => ({type: ADD_ITEM, key, content});\r\nexport const deleteItem = (key) => ({type: DELETE_ITEM, key});\r\nexport const handleDragAndDrop = (result) => ({type: HANDLE_DRAG_AND_DROP, result});\r\nexport const calculateCoordinates = (key, coordinates) => ({type: CALCULATE_COORDINATES, key, coordinates});\r\nexport const changeCoordinates = (key, lat, lng) => ({type: CHANGE_COORDINATES, key, lat, lng });\r\nexport const onMarkerClick = (key) => ({type: ON_MARKER_CLICK, key});\r\nexport const onCloseInfoWindow = (key) => ({type: ON_CLOSE_INFO_WINDOW, key});\r\n\r\n\r\nexport const getCoordinates = (key, str) => {\r\n  return (dispatch) => {\r\n    GoogleAPI.getCoordinates(str).then(response => {\r\n      const coordinates = response.results[0].geometry.location;\r\n      dispatch(calculateCoordinates(key, coordinates))\r\n    })\r\n  }\r\n}\r\n\r\n\r\nexport default mapReducer;","import {applyMiddleware, combineReducers, compose, createStore} from \"redux\";\r\nimport thunkMiddleware from \"redux-thunk\";\r\nimport mapReducer from \"./map-reducer\";\r\n\r\nlet reducers = combineReducers({\r\n  map: mapReducer\r\n});\r\n\r\nconst composeEnhancer = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst store = createStore(\r\n  reducers,\r\n  composeEnhancer(applyMiddleware(thunkMiddleware)),\r\n);\r\n\r\n\r\nwindow.store = store;\r\n\r\n\r\nexport default store;","import React, {Component} from \"react\";\r\nimport './MapItems.scss';\r\nimport deleteIcon from './../../assets/images/delete-icon.png';\r\nimport {Droppable} from 'react-beautiful-dnd';\r\nimport {Draggable} from \"react-beautiful-dnd\";\r\n\r\nclass MapItems extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.createTasks = this.createTasks.bind(this);\r\n  }\r\n\r\n  delete(key) {\r\n    this.props.delete(key);\r\n  }\r\n\r\n  createTasks(item, index) {\r\n    return (\r\n      <Draggable\r\n        key={item.key}\r\n        draggableId={item.key}\r\n        index={index}>\r\n        {provided => (\r\n          <li\r\n            {...provided.draggableProps}\r\n            {...provided.dragHandleProps}\r\n            ref={provided.innerRef}\r\n            className=\"list__item\"\r\n            key={item.key}>{item.text}\r\n            <img className=\"list__item-image\"\r\n                 src={deleteIcon}\r\n                 alt='Delete Icon'\r\n                 onClick={() => this.delete(item.key)}\r\n            />\r\n          </li>\r\n        )}\r\n      </Draggable>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    let todoEntries = this.props.entries;\r\n    let listItems = todoEntries.map((item, index) => this.createTasks(item, index));\r\n\r\n    return (\r\n      <Droppable droppableId='MapItems'>\r\n        {provided => (\r\n          <ul\r\n            ref={provided.innerRef}\r\n            {...provided.dropppableProps}\r\n            className=\"list\">\r\n            {listItems}\r\n            {provided.placeholder}\r\n          </ul>\r\n        )}\r\n      </Droppable>\r\n    );\r\n  }\r\n};\r\n\r\nexport default MapItems;","import React from 'react';\r\nimport {compose, withProps, withHandlers} from 'recompose';\r\nimport {\r\n  withScriptjs, withGoogleMap, GoogleMap, Marker, Polyline, InfoWindow,\r\n} from 'react-google-maps';\r\n\r\nconst GoogleMapComponent = compose(\r\n  withProps({\r\n    googleMapURL: 'https://maps.googleapis.com/maps/api/js?key=AIzaSyDFIeLcSXFoj1sjauT3e9I3V2p0P_hHAgk',\r\n    loadingElement: <div style={{height: '100%'}}/>,\r\n    containerElement: <div style={{height: '100%'}}/>,\r\n    mapElement: <div style={{height: '100%'}}/>,\r\n  }),\r\n  withHandlers(() => {\r\n    let refs = [];\r\n\r\n    return {\r\n      markerRef: () => (ref) => {\r\n        if (ref) {\r\n          let id = ref.props.id;\r\n          refs[id] = ref;\r\n        }\r\n      },\r\n\r\n      onMarkerDrag: props => (key) => {\r\n        let lat = refs[key].getPosition().lat();\r\n        let lng = refs[key].getPosition().lng();\r\n        props.changeCoordinates(key, lat, lng);\r\n      },\r\n\r\n      onMarkerClick: props => (key) => {\r\n        props.onMarkerClick(key);\r\n      },\r\n\r\n      onCloseInfoWindow: props => (key) => {\r\n        props.onCloseInfoWindow(key);\r\n      },\r\n    }\r\n  }),\r\n  withScriptjs,\r\n  withGoogleMap,\r\n)((props) => {\r\n\r\n  let pathCoordinates = [];\r\n  for (let i = 0; i < props.correspondCoordinates.length; i += 1) {\r\n    pathCoordinates[i] = {\r\n      lat: props.correspondCoordinates[i].coordinates.lat,\r\n      lng: props.correspondCoordinates[i].coordinates.lng,\r\n    }\r\n  }\r\n\r\n  console.log(props);\r\n\r\n  return (\r\n    <GoogleMap\r\n      defaultZoom={8}\r\n      defaultCenter={{lat: 55.751244, lng: 37.618423}}\r\n    >\r\n      {props.correspondCoordinates.map((marker) => {\r\n        return (\r\n          <Marker\r\n            position={{lat: marker.coordinates.lat, lng: marker.coordinates.lng}}\r\n            key={marker.key}\r\n            id={marker.key}\r\n            draggable={true}\r\n            ref={props.markerRef}\r\n            onDrag={() => props.onMarkerDrag(marker.key)}\r\n            onClick={() => props.onMarkerClick(marker.key)}\r\n          > { marker.open && <InfoWindow onCloseClick={() => props.onCloseInfoWindow(marker.key)}>\r\n              <div>{marker.text}</div>\r\n            </InfoWindow>}\r\n          </Marker>);\r\n      })}\r\n      <Polyline\r\n        path={pathCoordinates}\r\n        geodesic={true}\r\n        options={{\r\n          strokeColor: \"#ff2527\",\r\n          strokeOpacity: 0.75,\r\n          strokeWeight: 2\r\n        }}\r\n      />\r\n    </GoogleMap>\r\n  );\r\n});\r\n\r\nexport default GoogleMapComponent;\r\n","import React, {Component} from 'react';\nimport MapItems from './componets/MapItems/MapItems';\nimport './Map.scss';\nimport {DragDropContext} from 'react-beautiful-dnd';\nimport {\n  addItem,\n  changeCoordinates,\n  deleteItem,\n  getCoordinates,\n  handleDragAndDrop, onCloseInfoWindow,\n  onMarkerClick\n} from \"./redux/map-reducer\";\nimport connect from \"react-redux/es/connect/connect\";\nimport GoogleMapComponent from \"./componets/GoogleMapComponent/GoogleMapComponent\";\n\nclass MapApp extends Component {\n\n  onDragEnd = result => {\n\n    this.props.handleDragAndDrop(result);\n  }\n\n  render() {\n\n    let addItem = (e) => {\n      let key = Date.now();\n      this.props.addItem(key, this._inputElement.value);\n\n      let arr = this._inputElement.value.split(' ');\n      let str = arr.join('+');\n\n      this.props.getCoordinates(key, str);\n\n      this._inputElement.value = \"\";\n      e.preventDefault();\n    }\n\n    return (\n      <DragDropContext onDragEnd={this.onDragEnd}>\n        <div className=\"map\">\n          <div className=\"map_title\">Вводите адреса, желательно сначала указывать города. Пример: Москва Тверская 12</div>\n          <div className=\"map__container\">\n            <div className=\"map__list-container\">\n              <form onSubmit={addItem}>\n                <input className=\"map__input\"\n                       ref={(a) => this._inputElement = a}\n                       placeholder=\"Введите адрес\">\n                </input>\n              </form>\n\n              <MapItems\n                entries={this.props.items}\n                delete={this.props.deleteItem}\n              />\n            </div>\n            <div className=\"map__map-image-container\">\n              <GoogleMapComponent\n                changeCoordinates={this.props.changeCoordinates}\n                correspondCoordinates={this.props.correspondCoordinates}\n                onMarkerClick = {this.props.onMarkerClick}\n                onCloseInfoWindow = {this.props.onCloseInfoWindow}\n              />\n            </div>\n          </div>\n        </div>\n      </DragDropContext>\n    );\n  }\n}\n\n\nlet mapStateToProps = (state) => {\n  return {\n    items: state.map.items,\n    correspondCoordinates: state.map.correspondCoordinates\n  }\n}\n\nexport default connect(mapStateToProps, {addItem, deleteItem, handleDragAndDrop,\n  getCoordinates, changeCoordinates, onMarkerClick, onCloseInfoWindow })(MapApp);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport store from \"./redux/redux-store\";\nimport Map from './Map';\nimport * as serviceWorker from './serviceWorker';\nimport Provider from \"react-redux/es/components/Provider\";\n\nReactDOM.render(\n    <Provider store={store}>\n      <Map/>\n    </Provider>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n\n"],"sourceRoot":""}